#
# 1.OTA 的对象, 目标(还有常用的OTA 指令规范)
#
OTA 系统面向的对象不同, 设计方式也不同, 具体的对象有:
	* 汽车
	* 手机
	* 物联网终端
	* app

OTA 可以提高后续工厂对设备的热更新维护能力, 让设备时刻跟上工厂的最新设计, 是一个不错的互联网系统;



OTA 常用到的指令规范(行业默认的指令):
	Telematics Service Provider = TSP 远程控制指令服务
	ps:
		远程查看OTA 终端状态的app, 也估计是使用'TSP远程控制指令服务'进行软件定义的;

	OTA 信息安全声明:
		OTA 只实现远程更新功能, 动态更新系统/app, 但也是调用'信息安全SDK'最多的app, 
		OTA 不实现'信息安全SDK', 而是'信息安全SDK'的大用户, OTA 的大部分功能, 都离不开'信息安全SDK';





#
# 2.'OTA远程更新功能'的主要组成部分
#
'OTA远程更新功能'(Over the Air Technology)的主要任务简述:
		* OTA 动态更新系统/app
		* TSP 远程控制指令服务, 包括: 远程控制, 远程监控(汽车健康info 动态回显)



* 在线升级系统(不可远程控制):
	本功能, 支持升级多套子系统, 包括:
		- 座舱系统->升级:
				主要是更新android app, 一般很少更新android 系统(也有, 除非android 系统本身出现致命漏洞)

		- tbox系统->升级:
				主要无线电基带系统升级, 无线电驱动更新/无线电通信安全升级;

		- ap/cp autosar 车控系统->升级:
				update ap-autosar 汽车底盘系统(linux 应用更新);
				update cp-autosar 汽车ECU 模块驱动(linux 驱动更新);

		- OTA 系统->自我升级:
				主要是更新android app;

		- 监控camera 摄像头系统->升级:
				主要是更新行车记录仪系统的;

		- '汽车门, 窗, 灯, 雨刷控制系统(座舱控制系统)'->升级:
			这个控制'门, 窗, 灯, 雨刷'的系统, 一般只是一个android app, OTA 远程更新这个app;

		- 智能辅助驾驶系统(AI)->升级:
				主要是adas 功能更新, 更新智能辅助驾驶系统, 人工智能算法;

		- 恢复出厂设置->退挡, 复原:
			有升级, 必有恢复出厂设置;



* 客户端控制端(远程遥控):
	编写这部分功能, 主要是给用户远程监控汽车信息用的, 包括远程打开汽车摄像头, 主要包括:
		* 汽车status 状态info 汇报;
		* 座舱app 调用: 关门, 关灯等操作;
		* 行车记录仪数据调用;





#
# 3.OTA 安全简述
#
-刷写文件安全: 
	通过OTA更新的软件数据包, 一般都带有数字签名部分;
	控制器可以通过签名验证算法和密钥, 确认将要刷写的数据包的完整性和合法性;

-文件传输安全: 
	需要更新的软件数据包从云端通过无线网络下载到汽车, 这个数据传输的过程一般都带有保护机制;
	互联网中已经成熟的传输层安全协议(Transport Layer Security, TLS)是最常见的手段;

-诊断安全: 
	汽车OTA过程中往往会伴随通过UDS指令更新标定参数或者触发例程等操作;
	这时候就需要对UDS诊断操作先做一层安全控制, 
	常见的有UDS的0x27服务, 某些OEM还会拓展0x27的子功能或者自定义0x31例程来完成远程诊断的安全校验;

-启动升级过程:
	从整车角度, 需要判断电池余量、挡位等车辆状态信息再开始软件升级;
	这部分的逻辑判断需要由其他应用程序来实现;

-从云端下载软件:
	出于网络信息安全的考量, 本地控制器内的UCM模块一般不会和云端建立直接的通讯下载软件, 
	而一般由其他应用或者中央网关作为代理服务器下载;

-执行鉴权等安全操作:
	软件升级过程中涉及的验证签名过程, 一般由UCM再调用Crpto模块操作安全环境来执行;
	而访问控制则一般由UCM配合AUTOSAR中的IAM和EM模块来实施;



* 权限管理, 安全通信管理, 安全升级管理, 安全刷写管理:
	- 权限管理:
			文件权限, android 系统安全管理
	- 安全通信管理:
			通信过程安全管理, 校验数&加密等手段;
	- 安全刷写管理:
			刷写前检查电源是否正常, 数据是否齐全, 刷写包是否完整且已通过安全校验, 等等;
	...



* 刷写各种固件的功能模块:
	* autosar 固件刷写
	* android 虚拟机固件更换
	* linux 虚拟机固件更换
	* qnx/linux 母系统固件升级/更换
	* tbox 固件刷写
	...









