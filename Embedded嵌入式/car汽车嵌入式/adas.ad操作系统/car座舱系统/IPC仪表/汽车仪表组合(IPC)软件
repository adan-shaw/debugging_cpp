1.汽车仪表组合(IPC)软件简介:
	汽车中最重要的ECU之一是仪表板组合(IPC); 
	IPC向驾驶员提供与主要汽车系统(发动机、变速箱、ABS)相关的实际信息、当前速度信息、机油和冷却液温度警告、灯光使用、导航等; 

	PC视觉信息以多种方式呈现: 
		- 带指针的仪表(步进电机), 如车速表、转速计、机油、冷却剂和温度计等; 
		- 指示不同汽车单元和系统的状态或使用情况的信号灯, 例如灯的使用(远光灯/近光灯、左转/右转等)、电池状态、刹车、安全气囊、稳定性等; 
		- 显示主里程计和行程里程计、车载计算机消息(平均速度或油耗)或警告、变速箱信息或一些主要汽车ECU报告的一些错误等; 





2.IPC需要测试的功能
	2.1 车速表
			车速表用于以km/h或mph为单位指示车辆速度; 
			组合仪表执行从输入值(脉冲数或每秒转数或来自总线的值)到步进电机步数反映的角度指示的转换(1步=0,05625度); 
			当通过总线接收到速度时, 通常伴随着有效信号(品质因数); 
			转换是使用包含一些点(4-6)的特性曲线完成的, 这些点具有输入值和输出角度之间的对应关系, 在这些点之间使用线性插值; 
			特性曲线存储在IPC的EEPROM中;
			为了避免指针闪烁或跳跃, 使用了阻尼; 
			(测试车速表的常见行为)在车速表测试期间, 必须检查以下与电池连接和发动机点火相关的要求: 
				- 当电池关闭时, 车速表指针保持在相同位置; 在重新连接时, 指针被同步, 然后返回到有效指示; 
				- 当点火开关打开时, 指针返回零指示, 然后返回有效指示; 对于正常范围内的值, 指针根据特性曲线以阻尼方式移动; 如果有效信号为假, 则指针下降到零(无效速度信号); 
				- 电源恢复后(在某些情况下欠压/过压后)指针返回零位, 然后返回有效指示(同步); 
				- 如果输入信号超出范围, (错误处理)指针会在延迟后下降到零位置(无阻尼)来指示这种情况; 
				- 在欠压(小于9V)/过压(大于16V)和电源故障的情况下-指针保持在相同位置, 当电压回到正常范围时, 指针同步(在某些IPC中它保持在同一位置), 然后指示有效值; 
			在某些汽车组合仪表中, 应用了提前系数; 
			它表示添加到实际车辆速度的百分比, 会指示更大的速度值, 这样做是为了保证安全行车; 
			在下面的仪表中, 将20%的提前系数添加到100km/h的速度, 对于驾驶员来说, 它是120km/h, 如图: ./车速表的提前系数demo.png 所示; 

	2.2 转速表
			转速表测试类似于速度表, 这里可以使用两个阻尼; 
			第一个是在发动机运转且车辆静止时, 则阻尼较高(可以在短时间内进行较大的变化); 
			第二个阻尼是在车辆移动时-然后阻尼较小(可能的变化较小); 
			必须对转速表进行与速度表类似的常见行为测试; 

	2.3油位指示
			如果通过CAN总线接收信号, 则特性曲线类似于速度表; 
			如果信号直接来自传感器, 则使用两条曲线: ADC值->升数->步进电机步数; 
			关于车辆移动状态使用两个阻尼值(在某些情况下, 一个如图5所示, 另一个是线性的)-当车辆停止时, 阻尼较低; 
			行驶中的车辆需要更大的阻尼, 以克服由于加速和制动而导致的油箱中的燃油移动; 
			当燃油液位低于定义的阈值时, 燃油储备指示器将被激活; 

	2.4 冷却液温度指示
			冷却液温度的测试类似于燃油油位指示; 行为和阻尼取决于车速; 
			当车辆停止时(在驾驶会话之后), 由于传感器周围的温度会升高(热量爆发), 指示将不会超过最后一个有效值, 持续时间与驾驶持续时间成正比; 
			一些额外的测试与正常冷却剂值(75-115度)有关-然后指针静止不动; 如果发动机过热(温度>阈值)-会生成警告(可以是LED、声音警告、显示屏上的警告消息或它们的组合), 因此还必须检查这些警告; 

	2.5 里程表
			主里程表存储在IPC EEPROM区, 不可复位(生产后); 最大显示值为999.999公里; 
			存储使用多块存储技术完成-值(公里/英里)存储在更多字节的位置(例如32), 每个字节都根据IPC特定算法写入(以避免每次写入相同的位置); 该EEPROM位置不能被较低的值覆盖; 
			行程里程表存储在IPC RAM中(在某些情况下存储在EEPROM中); 达到最大值(999,0或1999,0 公里)后, 将翻滚至0,0公里; 

	2.6 指示器
			信号装置具有特定的激活/停用/再激活条件; 图7给出了一些最流行的指示器及其含义; 
			在一些组合中, 指示器的灯或LED位于速度表而一些指示器位于这些区域之外或转速表区域; 
			在某些组合中, 一些信号装置(警告)仅在主显示器中显示为图标; 

	2.7 车载里程计算机
			车载里程计算机显示的信息是通过计算距离、时间和注入的燃料来计算的; 
			基于这些数据, 获得即时/平均消耗和速度; 
			剩余续航里程还反映了在油箱中剩余燃料和实际速度(实际消耗)下可以行驶的距离; 行程持续时间也可以计算在内; 
			作为测试对象的车载计算机的功能是平均速度、平均消耗、行程持续时间-可以重置(通常通过按下仪表板上的旋钮); 
			重置后(电池重置、手动重置、点火开始)-需要一定的距离/时间/消耗, 以便计算和显示第一个值; 
			测试还与测量单位相关, 例如: 
				- 距离公里或英里; 
				- 速度km/h或mph; 
				- 消耗1/100公里, mpg(英国或美国), km/l

	2.8 信息和警告
			更复杂的仪表盘有一个大点阵显示器(在某些情况下是彩色的)显示额外的信息, 
			提醒司机一些汽车功能的状态(轮胎压力、发动机状态、ABS、ASR、ESP、安全带、档位信息、冰警告、导航、电话、收音机/CD 等); 
			可以显示一条文本消息, 也可以通过符号或/和提示音加倍显示; 
			消息可以用不同的语言显示(可从菜单或EEPROM配置); 
			当同时显示更多警告/消息时, 它们将以滚动模式显示: 每条消息(如果有的话, 带有符号)显示一段时间, 然后显示下一条; 
			消息具有指定的优先级; 定义项目特定程序以处理优先级-消息可以/不能被更高优先级的消息打断, 消息具有最短显示时间; 
			接下来给出了一些可以显示的附加消息, 它们是特定测试的对象: 
				- 燃油液位
				- 冷却液温度
				- 室外温度
				- 警告信息
				- 油位
				- 服务间隔指示
				- 时钟, 日期
				- 齿轮箱位置和模式
				- 分区/临时
				- 导航
				- 电话; 

	2.9 EEPROM
			EEPROM存储器包含一些作为测试对象的配置参数, 它包含有关组合本身的信息-型号、版本、生产日期、月份、年份,
			还有关发动机和汽车中最重要的ECU的类似数据、里程表数据、特性曲线、阻尼参数tau、发动机类型(汽油、柴油、混合)、测量单位公里、英里、错误代码和许多其他数据; 



	除了与上述IPC单元和元件的功能相关的软件测试外, 还必须特别注意下面描述的IPC电源管理测试和照明测试; 
	电源管理测试涉及9V至16V的正常电压范围、欠压(9V以下)、过压(16V以上)和电源故障(6V以下); 
	在正常电压范围内(电压在13.5V左右), 组合仪表具有正常功能; 

	超出此范围, 除电源故障外, 我们可能会遇到以下情况: 
		-指针冻结到实际位置, 微处理器控制的LED(灯)被停用, EEPROM的写入功能被停用; 
	所以要确保RAM中的数据保留, 当电压恢复到正常范围(有滞后)时, 恢复正常功能; 
	以及指针同步(回到零位, 再回到有效指示), 避免失步; 
	在电源故障期间, 除了欠压情况外, RAM数据不再保留; 

	当电压恢复到正常范围时, 组合仪表复位; 
	背景照明与显示、刻度和指针有关, 它们可以单独照明; 
	照明根据两种情况而有所不同: 
		-白天, 只有显示屏以小亮度照亮, 
		-夜间, 显示屏、刻度和指针都被照亮; 
		 在夜间照明期间, 可以手动或自动修改亮度; 当前灯被激活(手动模式)或当外部照明水平低于定义的阈值(自动模式)时, 日/夜转换完成; 
	照明级别存储在EEPROM中, 所选级别作为指针存储在该照明表中; 显示器和刻度+指针可以有不同的照度表来有不同的照度; 

	使用一个组合按钮或菜单中的功能执行手动调光; 
	自动调光是使用一个传感器来执行的, 该传感器决定从白天到夜间照明水平的转变; 
	照明调暗不影响信号灯的亮度; 照明可用作发出警告的一种方式; 
	例如, 在某些汽车中, 当发动机转速超过定义的阈值时, 转速表刻度照明会以全亮度激活(而其他刻度的照明会停用), 以表示发动机可能已损坏; 



