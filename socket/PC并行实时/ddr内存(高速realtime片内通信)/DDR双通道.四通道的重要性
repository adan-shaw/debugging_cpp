是买1根16GB的内存好呢? 
还是买两根8GB的内存??
还是买4根4GB的内存? 

最佳选择:
	8*2 双通道 or 4+8 双通道



#
# 1.双通道和四通道, 那种组合更好?
#
	现在的CPU里面都集成了内存控制器. 
	过去的内存控制器只有一个控制单元, 每次只能操作一个DIMM.
	后来增加了新的控制单元可以支持同时操作两个DIMM, 
	这就是我们通常说的Dual Channel(双通道).

	现在更有了Quad Channel, 也就是四通道(在两路服务器上还有八通道)

	通道多了, 内存带宽'理论上'双通道可以翻翻, 四通道可以达到四倍带宽！(这个理论成立!)

	而我们知道, 相对CPU和Cache而言, 内存的延迟要高一个数量级, 
	很多指令都是阻塞在等待内存完成. 
	有了多通道, 多内核访问内存也似乎可以各不干扰, 太好了！


	理论是好的, 但现实使用的时候, 却没有那么美好. 
	程序编译出来要访问的'虚拟内存地址'是连续的, 是有局部性的. 
	而我们的内存在BIOS初始化的时候物理内存也是连续分配的, 
	例如我们有四根4G的DIMM, 尽管我们启动了四通道, 地址分配还是
		0~4G => DIMM 0
		4~8G => DIMM 1
		8~12G => DIMM 2
		12~16G => DIMM 3


	尽管操作系统可以在虚拟地址到物理地址的转换上动一下手脚, 
	但程序访问的局部性却没有根本性的改变. 
	一个例子是:
		我们程序只申请了1G内存, 
		很可能这些内存被分配到了某一个DIMM上, 多通道根本没有用上！
		(不会自动平均分配到4 个不同的DIMM 上面, 让存取的时候可以平均提取.
		 这样设计的算法也太复杂了, 而且可靠性很低, 
		 机器/物理层, cpu 不愿意做'这样的算法'.
		 系统/软件层, 程序员更不愿意做'这样的算法'.
		 当然, 机器/物理层在双通道的时候, 还是会划分任务的, 
		 有双通道当然会好一点.
		 只是简单的平均主义: A 任务 DIMM0, B 任务 DIMM1,
		 这样CPU 在等待DIMM 时, 就多一个选择.
		 但是通道多, 真的不如内存性能好!! 内存容量大, 总比通道多要好.
		 容量大还意味着: 拓展性强, 后期还能多买一根.)


	intel 物理内存分配的时候, 加入了Interleave的支持: 
	也就是把内存打散了平均分配在多跟DIMM上, 进行交错, 
	从根本上让多通道利用起来, 
	也叫做Channel Interleaving(和Rank interleaving不同). 
	这个是'服务器内存控制器'上的技术, '台式机'也逐渐引入, 
	切记在BIOS中打开, 不打开多通道的特性就损失大半.








#
#2.单通道VS双通道
#
	在台式机上, 多通道只有大型程序, 在内存使用量很大的时候才能有所帮助, 
	对小程序帮助不大. 我们来看几个例子:
	国外玩家用1根8G VS 2根4G双通道的结果. 
	可以看出2根4G双通道比8G单通道性能高出15%到50%！

	单通道 VS 双通道 VS 四通道
	这时四通道有时占一点优势, 有时差不多, 
	而'8G双通道'相对'16G单通道'来说完全没有优势！
	这和上面的那个结果似乎是相反的, 这是为什么呢? 
	答案就在内存的使用量上, 如果内存占用不到后面的DIMM上去, 
	多余的通道就不会产生多大的价值. 
	[实验结论:
	 硬件可以平均主义, 一个进程往一个进程里面分配内存, 每个进程内存区不一样.
	 但是实际'软件层'不是这样的!! 软件层都是'虚拟内存地址', 是连续的!!
	 这样当系统使用不超过4G 内存时, 第二条内存很少会用到.
	 这种情况, 多通道的优势不大, 还不如单挑高性能的强.]






#
# 3.结论
#
	适合自己的才是最好的. 如果仅仅上上网, 内存用量不大, 多通道就没有价值, 
	反倒将来的扩展性就很重要, 买根8G的内存就好. 
	如果玩游戏, 可以考虑买两根8G内存.
	不建议买4G组成四通道, 这样扩展性就完全丧失了. 






